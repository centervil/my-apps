# 設計書 - Issue 171

## アーキテクチャ概要
既存の個別スラッシュコマンドを、単一の `.gemini/commands/dev.toml` に統合する。このコマンドは引数として `Issue番号` または `サブコマンド + Issue番号` を受け取り、それに応じて適切なプロンプトを選択または実行する。

## 実装方針

### 1. 統合コマンドの定義 (`.gemini/commands/dev.toml`)
- 引数のパース: `{{args}}` を解析し、数値のみの場合は「全工程実行モード」、文字列（start, review, end等）が含まれる場合は「個別機能実行モード」と判断する。
- 動的プロンプトの構成: 引数に基づいて、実行すべきアクション（各工程のプロンプト）を指示する。

### 2. サブコマンドの対応関係
- `start` (または引数がIssue番号のみ): `dev-start.toml` のロジックを実行。
- `task`: `task-start.toml` のロジックを実行（タスクの具体化）。
- `review`: `review.toml` のロジックを実行。
- `end`: `dev-end.toml` のロジックを実行。
- `cancel`: `dev-cancel.toml` のロジックを実行。

### 3. コンテキストの維持
- `docs/issues/[ID]/` ディレクトリ内の情報を常に「ソース・オブ・トゥルース」として扱い、各工程間で情報を引き継ぐ。

## テスト戦略
- **手動テスト**:
    - `/dev 171` (または適切なダミーID) を実行し、ドキュメント生成からの一連の流れが正しく動作するか確認する。
    - `/dev review 171` を実行し、レビュー工程のみが起動することを確認する。
    - 不正な引数（IDがない、存在しないサブコマンド）を与えた場合のエラーハンドリングを確認する。
- **検証項目**:
    - 引数の順序（`/dev 171 review` vs `/dev review 171`）が柔軟に解釈されること。
    - 既存の `.toml` ファイルを削除しても、`/dev` 経由で機能が失われないこと。
