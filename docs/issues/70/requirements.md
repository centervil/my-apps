# 要件定義書 (requirements.md)

## 1. 概要
Spotifyへのエピソードアップロード処理を、コマンドラインインターフェース（CLI）から実行可能にする。これにより、開発者はコードを直接編集することなく、引数を通じてアップロード設定（番組IDや音声ファイルパス）を動的に指定できるようになる。

## 2. ユーザーストーリー
**As a** 開発者,
**I want** コマンドラインから `showId` や `audioPath` を引数として渡してアップロード処理を実行できる CLI ツール
**So that** 異なる設定でのアップロードを、手動でコードを修正することなく、迅速かつ簡単に行えるようにしたい。

## 3. 受け入れ基準 (Acceptance Criteria)

- **AC-1: CLIから番組IDを指定できる**
  - `npm run upload -- --showId <ID>` の形式でコマンドを実行できる。
  - `--showId` 引数は必須であり、指定されなかった場合はエラーメッセージを表示して処理を終了する。

- **AC-2: CLIから音声ファイルパスを指定できる**
  - `npm run upload -- --showId <ID> --audioPath /path/to/audio.mp3` の形式でコマンドを実行できる。
  - `--audioPath` 引数はオプションである。

- **AC-3: 音声ファイルパスのフォールバック機能**
  - `--audioPath` 引数が指定されなかった場合、ローカルの `tmp/downloads` ディレクトリから最新のタイムスタンプを持つ音声ファイルを自動的に選択してアップロード対象とする。
  - `tmp/downloads` ディレクトリが存在しない、または音声ファイルが見つからない場合は、エラーメッセージを表示して処理を終了する。

- **AC-4: アップロードロジックの呼び出し**
  - CLIは、受け取った引数またはフォールバック機能によって決定された `showId` と `audioPath` を使用して、既存のアップロードロジック (`src/features/spotifyUploader.ts`) を呼び出す。

- **AC-5: npmスクリプトの定義**
  - `package.json` に、CLIを実行するための `upload` スクリプトが定義されている。

- **AC-6: 依存関係の追加**
  - コマンドライン引数の解析に必要なライブラリ（例: `yargs`）が `package.json` の `devDependencies` に追加されている。
