# Requirements Document - Issue #130

## 1. 概要
`spotify-automation` ツールにおいて、エラー発生時に保存されるスクリーンショットの保存先およびファイル名生成ロジックを改善し、CI/CDパイプライン（Nx, GitHub Actions）との親和性を高める。

## 2. ユーザーストーリー
- **As a** CI/CD管理者および開発者
- **I want to** エラー発生時のスクリーンショットが、予測可能かつCIでアーティファクトとして収集しやすいディレクトリに保存されるようにしたい
- **So that** テスト失敗時や実行エラー時のデバッグを迅速に行い、原因を特定できる。

## 3. 要件

### 3.1 機能要件
- **保存先の柔軟性**: スクリーンショットの保存先ディレクトリは固定（`process.cwd()`）ではなく、以下の優先順位で決定されること。
    1. 環境変数 `SPOTIFY_AUTOMATION_OUTPUT_DIR` で指定されたパス
    2. （指定がない場合）プロジェクトの出力ディレクトリ（例: `dist/apps/ui-automations/spotify-automation/screenshots` または `test-results/`）
- **一意なファイル名**: 生成されるスクリーンショットのファイル名は、連続してエラーが発生した場合でも上書きされないよう、タイムスタンプ等を含めた一意なものであること（例: `error-20260111-123456.png`）。
- **CI連携**: 保存されたファイルは、Nxのキャッシュ機構やGitHub Actionsのアーティファクトアップロードアクションによって容易に収集可能であること。

### 3.2 非機能要件
- **既存機能への影響**: 正常系のアップロード処理には影響を与えないこと。
- **ログ出力**: スクリーンショットが保存された際、その絶対パスを標準エラー出力（または標準出力）に明確に表示すること。

## 4. 受け入れ基準
- [ ] 環境変数 `SPOTIFY_AUTOMATION_OUTPUT_DIR` を設定して実行した際、指定したディレクトリにスクリーンショットが保存されること。
- [ ] 環境変数が未設定の場合、デフォルトの適切なディレクトリに保存されること。
- [ ] ファイル名にタイムスタンプが含まれ、複数回エラーが発生しても別々のファイルとして保存されること。
- [ ] `process.cwd()` 直下にファイルが生成されないこと。
